syntax = "proto3";

message Command {

    message Build {
        string commit_hash = 1;
        bytes script = 2;
    }

    message ConnectWorker {
        string address = 1;
        int32 port = 2;
    }

    message ConnectRequest {
        string repo_address = 1;
    }

    message Authenticate {
        string password = 1;
    }

    string token = 1;

    oneof command {
        Build build = 2;
        ConnectWorker connect_worker = 3;
        Authenticate auth = 4;
    }

}

message Result {

    enum Code {
        NONE = 0;
        OK = 1;
        FAIL = 2;
    }

    Code code = 1;
    string error = 2;
    string token = 3;

}

